import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,b as a,o as t}from"./app-BMihMyie.js";const n={};function r(o,e){return t(),s("div",null,[...e[0]||(e[0]=[a('<p>Following the resumption of power after campus-wide circuit maintenance, several server-related issues emerged during system checks. Below is a detailed breakdown of the problems encountered and their resolutions.</p><hr><h3 id="_1-intermittent-server-monitoring-failures" tabindex="-1"><a class="header-anchor" href="#_1-intermittent-server-monitoring-failures"><span>1. Intermittent Server Monitoring Failures</span></a></h3><h6 id="symptoms" tabindex="-1"><a class="header-anchor" href="#symptoms"><span>Symptoms</span></a></h6><p>The monitoring system (polling server status via <code>nvidia-smi</code> every 15 seconds) frequently timed out.</p><h6 id="root-cause" tabindex="-1"><a class="header-anchor" href="#root-cause"><span>Root Cause</span></a></h6><p>NVIDIA GPUs default to <strong>non-persistent mode</strong>. When idle, <code>nvidia-smi</code> response latency increases significantly, causing monitoring script timeouts.</p><h6 id="solutions" tabindex="-1"><a class="header-anchor" href="#solutions"><span>Solutions</span></a></h6><ol><li><p><strong>Temporary Persistence Mode Activation</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nvidia-smi</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --persistence-mode=1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>Permanent Daemon Configuration</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enable</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --now</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nvidia-persistenced.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><blockquote><p>Reference: <a href="https://wiki.archlinux.org/title/NVIDIA/Tips_and_tricks#Driver_persistence" target="_blank" rel="noopener noreferrer">NVIDIA/Tips and tricks - ArchWiki</a></p></blockquote><hr><h3 id="_2-unstable-ssh-connectivity" tabindex="-1"><a class="header-anchor" href="#_2-unstable-ssh-connectivity"><span>2. Unstable SSH Connectivity</span></a></h3><h6 id="symptoms-1" tabindex="-1"><a class="header-anchor" href="#symptoms-1"><span>Symptoms</span></a></h6><p>SSH connections intermittently failed despite successful pings, occasionally triggering public key mismatches.</p><h6 id="diagnosis" tabindex="-1"><a class="header-anchor" href="#diagnosis"><span>Diagnosis</span></a></h6><ul><li>Unauthorized devices from other departments were connected to the same switch.</li><li>IP conflicts caused SSH requests to route to incorrect hosts.</li></ul><h6 id="immediate-actions" tabindex="-1"><a class="header-anchor" href="#immediate-actions"><span>Immediate Actions</span></a></h6><ul><li>Physically inspected switch ports and removed unauthorized devices.</li><li>Enforced MAC address binding and revised IP allocation policies.</li></ul><h6 id="long-term-proposal" tabindex="-1"><a class="header-anchor" href="#long-term-proposal"><span>Long-Term Proposal</span></a></h6><p>Implementing centralized SSH certificate signing for server authentication (deferred due to promotion complexity).</p><hr><h3 id="_3-post-reboot-nvidia-driver-failure" tabindex="-1"><a class="header-anchor" href="#_3-post-reboot-nvidia-driver-failure"><span>3. Post-Reboot NVIDIA Driver Failure</span></a></h3><h6 id="symptoms-2" tabindex="-1"><a class="header-anchor" href="#symptoms-2"><span>Symptoms</span></a></h6><p>GPU drivers failed to load after reboot.</p><h6 id="cause-analysis" tabindex="-1"><a class="header-anchor" href="#cause-analysis"><span>Cause Analysis</span></a></h6><ul><li>A prior kernel update had not been applied until reboot.</li><li>The new kernel version lacked compatible NVIDIA driver modules.</li></ul><h6 id="resolution" tabindex="-1"><a class="header-anchor" href="#resolution"><span>Resolution</span></a></h6><ol><li><p>Rebuilt drivers via DKMS:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dkms</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> autoinstall</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Verified functionality:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nvidia-smi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h6 id="key-takeaway" tabindex="-1"><a class="header-anchor" href="#key-takeaway"><span>Key Takeaway</span></a></h6><p>Validate driver compatibility immediately after kernel updates. DKMS automation is strongly recommended.</p>',30)])])}const h=i(n,[["render",r]]),c=JSON.parse('{"path":"/2025/2025-03-28-Server-Maintenance-Log-Post-Power-Restoration-Issue-Analysis.html","title":"Server Maintenance Log: Post-Power Restoration Issue Analysis","lang":"en-US","frontmatter":{"date":"2025-03-28T11:15:42.000Z","modified":"2025-09-20T10:37:28.000Z","tags":["Laboratory","PhD","Server","Ubuntu"],"title":"Server Maintenance Log: Post-Power Restoration Issue Analysis","description":"Following the resumption of power after campus-wide circuit maintenance, several server-related issues emerged during system checks. Below is a detailed breakdown of the problem...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Server Maintenance Log: Post-Power Restoration Issue Analysis\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-03-28T11:15:42.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"liblaf\\",\\"url\\":\\"https://github.com/liblaf\\"}]}"],["meta",{"property":"og:url","content":"https://hope.liblaf.me/2025/2025-03-28-Server-Maintenance-Log-Post-Power-Restoration-Issue-Analysis.html"}],["meta",{"property":"og:site_name","content":"liblaf"}],["meta",{"property":"og:title","content":"Server Maintenance Log: Post-Power Restoration Issue Analysis"}],["meta",{"property":"og:description","content":"Following the resumption of power after campus-wide circuit maintenance, several server-related issues emerged during system checks. Below is a detailed breakdown of the problem..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"article:tag","content":"Ubuntu"}],["meta",{"property":"article:tag","content":"Server"}],["meta",{"property":"article:tag","content":"PhD"}],["meta",{"property":"article:tag","content":"Laboratory"}],["meta",{"property":"article:published_time","content":"2025-03-28T11:15:42.000Z"}]]},"git":{},"readingTime":{"minutes":0.91,"words":274},"filePathRelative":"2025/2025-03-28-Server-Maintenance-Log-Post-Power-Restoration-Issue-Analysis.md","excerpt":"<p>Following the resumption of power after campus-wide circuit maintenance, several server-related issues emerged during system checks. Below is a detailed breakdown of the problems encountered and their resolutions.</p>\\n<hr>\\n<h3>1. Intermittent Server Monitoring Failures</h3>\\n<h6>Symptoms</h6>\\n<p>The monitoring system (polling server status via <code>nvidia-smi</code> every 15 seconds) frequently timed out.</p>","autoDesc":true}');export{h as comp,c as data};
