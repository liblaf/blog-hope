import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as a,o as n}from"./app-BMihMyie.js";const l={};function t(r,i){return n(),e("div",null,[...i[0]||(i[0]=[a(`<h2 id="hardware" tabindex="-1"><a class="header-anchor" href="#hardware"><span>Hardware</span></a></h2><div class="language-console line-numbers-mode" data-highlighter="shiki" data-ext="console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-console"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$ lspci -k -d ::03xx</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">01:00.0 VGA compatible controller: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] (rev a1)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Subsystem: Lenovo Device 3b53</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Kernel driver in use: nvidia</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Kernel modules: nouveau, nvidia_drm, nvidia</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="error" tabindex="-1"><a class="header-anchor" href="#error"><span>Error</span></a></h2><div class="language-log line-numbers-mode" data-highlighter="shiki" data-ext="log" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-log"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">kernel: NVRM: GPU at PCI:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0000:01:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: GPU-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4f667a85-72a7-4605-2197-8f6a16b663a1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">kernel: NVRM: Xid (PCI:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0000:01:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">79</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, pid=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">22434</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, name=gnome-character, GPU has fallen off the bus.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">kernel: NVRM: GPU </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0000:01:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: GPU has fallen off the bus.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">kernel: NVRM: kgspRcAndNotifyAllChannels_IMPL: RC all channels for critical error </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">79</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">kernel: NVRM: _threadNodeCheckTimeout: API_GPU_ATTACHED_SANITY_CHECK failed!</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">kernel: NVRM: _threadNodeCheckTimeout: API_GPU_ATTACHED_SANITY_CHECK failed!</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="solution" tabindex="-1"><a class="header-anchor" href="#solution"><span>Solution</span></a></h2><ul><li><a href="https://bbs.archlinux.org/viewtopic.php?pid=2230533#p2230533" target="_blank" rel="noopener noreferrer">https://bbs.archlinux.org/viewtopic.php?pid=2230533#p2230533</a></li><li><a href="https://github.com/NVIDIA/open-gpu-kernel-modules/issues/820#issuecomment-2769571555" target="_blank" rel="noopener noreferrer">https://github.com/NVIDIA/open-gpu-kernel-modules/issues/820#issuecomment-2769571555</a></li></ul><p>Add the following to disable GSP firmware with the proprietary <a href="https://archlinux.org/packages/extra/x86_64/nvidia-lts/" target="_blank" rel="noopener noreferrer">nvidia-lts</a>.</p><blockquote><p>The open kernel modules unconditionally require GSP firmware. You cannot disable GSP when using the open kernel modules.</p></blockquote><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sh"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># /etc/modprobe.d/nvidia.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">options</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nvidia</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NVreg_EnableGpuFirmware=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,9)])])}const o=s(l,[["render",t]]),d=JSON.parse('{"path":"/2025/2025-04-26-gpu-has-fallen-off-the-bus.html","title":"GPU has fallen off the bus.","lang":"en-US","frontmatter":{"date":"2025-04-26T16:21:27.000Z","modified":"2025-09-20T10:37:37.000Z","tags":["Dotfiles","Hardware/NVIDIA","OS/Linux/Arch","OS/Linux/Arch/CachyOS"],"title":"GPU has fallen off the bus.","description":"Hardware Error Solution https://bbs.archlinux.org/viewtopic.php?pid=2230533#p2230533 https://github.com/NVIDIA/open-gpu-kernel-modules/issues/820#issuecomment-2769571555 Add the...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"GPU has fallen off the bus.\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-04-26T16:21:27.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"liblaf\\",\\"url\\":\\"https://github.com/liblaf\\"}]}"],["meta",{"property":"og:url","content":"https://hope.liblaf.me/2025/2025-04-26-gpu-has-fallen-off-the-bus.html"}],["meta",{"property":"og:site_name","content":"liblaf"}],["meta",{"property":"og:title","content":"GPU has fallen off the bus."}],["meta",{"property":"og:description","content":"Hardware Error Solution https://bbs.archlinux.org/viewtopic.php?pid=2230533#p2230533 https://github.com/NVIDIA/open-gpu-kernel-modules/issues/820#issuecomment-2769571555 Add the..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"article:tag","content":"OS/Linux/Arch/CachyOS"}],["meta",{"property":"article:tag","content":"OS/Linux/Arch"}],["meta",{"property":"article:tag","content":"Hardware/NVIDIA"}],["meta",{"property":"article:tag","content":"Dotfiles"}],["meta",{"property":"article:published_time","content":"2025-04-26T16:21:27.000Z"}]]},"git":{},"readingTime":{"minutes":0.62,"words":186},"filePathRelative":"2025/2025-04-26-gpu-has-fallen-off-the-bus.md","excerpt":"<h2>Hardware</h2>\\n<div class=\\"language-console line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"console\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-console\\"><span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">$ lspci -k -d ::03xx</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">01:00.0 VGA compatible controller: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] (rev a1)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">        Subsystem: Lenovo Device 3b53</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">        Kernel driver in use: nvidia</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">        Kernel modules: nouveau, nvidia_drm, nvidia</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{o as comp,d as data};
